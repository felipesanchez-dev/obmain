---
import Container from "@/components/container.astro";
import Dropdown from "./dropdown.astro";
import { Astronav, MenuItems, MenuIcon } from "astro-navbar";

const menuitems = [
 
   {
    title: "INICIO",
    path: "/",
  },
   {
    title: "CONOCE MÁS",
    path: "#feature",
  },
  // {
  //   title: "Pricing",
  //   path: "/pricing",
  // },
 
  // {
  //   title: "Blog",
  //   path: "/blog",
  // },
  // {
  //   title: "Contact",
  //   path: "/contact",
  // },
  // {
  //   title: "Pro Version",
  //   badge: true,
  //   path: "https://astroship-pro.web3templates.com/",
  // },
  //  {
  //   title: "Features",
  //   path: "#",
  //   children: [
  //     { title: "Action", path: "/" },
  //     { title: "Another action", path: "#" },
  //     { title: "Dropdown Submenu", path: "#" },
  //     { title: "404 Page", path: "/404" },
  //   ],
  // },
];
---

<div
  class="navbar-wrapper fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <Container>
    <header class="flex flex-col lg:flex-row justify-between items-center py-4">
      <Astronav>
        <div class="flex w-full lg:w-auto items-center justify-between">
          <a href="/" class="text-lg navbar-logo flex items-center gap-2">
            <img src="/logo.png" alt="Obmain Ingeniería Logo" class="h-12" />
            <div class="flex flex-col leading-tight items-center">
              <span class="font-bold text-[#99060b] text-2xl">OBMAIN</span>
              <span class="text-[#f0b000] font-bold text-sm">INGENIERIA</span>
            </div>
          </a>
          <div class="block lg:hidden">
            <MenuIcon class="w-4 h-4 navbar-icon" />
          </div>
        </div>
        <MenuItems class="hidden w-full lg:w-auto mt-2 lg:flex lg:mt-0">
          <ul class="flex flex-col lg:flex-row lg:gap-3">
            {
              menuitems.map((item, index) => (
                <>
                  {item.children && (
                    <Dropdown
                      title={item.title}
                      children={item.children}
                      lastItem={index === menuitems.length - 1}
                    />
                  )}

                  {!item.children && (
                    <li>
                      <a
                        href={item.path}
                        class="flex lg:px-3 py-2 items-center text-gray-600 hover:text-gray-900">
                        <span> {item.title}</span>
                        {item.badge && (
                          <span class="ml-1 px-2 py-0.5 text-[10px] animate-pulse font-semibold uppercase text-white bg-indigo-600 rounded-full">
                            New
                          </span>
                        )}
                      </a>
                    </li>
                  )}
                </>
              ))
            }
          </ul>
        </MenuItems>
      </Astronav>
    </header>
  </Container>
</div>

<style>
  .navbar-wrapper {
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid rgba(209, 213, 219, 0.163);
    margin: 0;
    padding: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .navbar-wrapper.scrolled {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border: 1px solid rgba(209, 213, 219, 0.4);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    margin: 12px 16px;
    padding: 0;
    border-radius: 16px;
  }

  .navbar-wrapper header {
    transition: padding 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .navbar-wrapper.scrolled header {
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
  }

  .navbar-logo span {
    transition: color 0.3s ease;
  }

  .navbar-link {
    transition: color 0.3s ease;
  }

  .navbar-icon {
    transition: color 0.3s ease;
  }

  /* Efecto liquid glass más pronunciado */
  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .navbar-wrapper {
      background: rgba(255, 255, 255, 0.7);
    }

    .navbar-wrapper.scrolled {
      background: rgba(255, 255, 255, 0.8);
    }
  }
</style>

<script>
  // Efecto de scroll para el navbar
  function handleScroll() {
    const navbar = document.querySelector(".navbar-wrapper");
    if (navbar) {
      if (window.scrollY > 50) {
        navbar.classList.add("scrolled");
      } else {
        navbar.classList.remove("scrolled");
      }
    }
  }

  // Ejecutar al cargar la página
  handleScroll();

  // Ejecutar al hacer scroll
  window.addEventListener("scroll", handleScroll);

  // Re-ejecutar en navegación del lado del cliente de Astro
  document.addEventListener("astro:page-load", () => {
    handleScroll();
    window.addEventListener("scroll", handleScroll);
  });
</script>
